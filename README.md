# æ•°æ®å¤„ç†Agent - MACoreé¡¹ç›®

åŸºäºMACoreæ¡†æ¶çš„æ™ºèƒ½æ•°æ®æ ‡å‡†åŒ–å’Œé¢„å¤„ç†ç³»ç»Ÿï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œä¸“æ³¨äºæ•°æ®è´¨é‡æå‡å’Œæ•æ„Ÿä¿¡æ¯ä¿æŠ¤ã€‚

## ğŸš€ é¡¹ç›®ç‰¹è‰²

- **æ™ºèƒ½æ•°æ®å¤„ç†**ï¼šè‡ªåŠ¨åŒ–æ•°æ®æ ‡å‡†åŒ–ã€ç¼ºå¤±å€¼å¤„ç†ã€ç±»å‹è½¬æ¢
- **AIé©±åŠ¨è„±æ•**ï¼šä½¿ç”¨LLMæ™ºèƒ½è¯†åˆ«æ•æ„Ÿå­—æ®µï¼Œè‡ªåŠ¨æ‰§è¡Œæ•°æ®è„±æ•
- **å…¨æµç¨‹å¯è§†åŒ–**ï¼šStreamlitå‰ç«¯ç•Œé¢ï¼Œç›´è§‚å±•ç¤ºå¤„ç†è¿‡ç¨‹å’Œç»“æœ
- **ä¼ä¸šçº§API**ï¼šFastAPIåç«¯æœåŠ¡ï¼Œæ”¯æŒå¼‚æ­¥å¤„ç†å’ŒçŠ¶æ€è·Ÿè¸ª
- **é…ç½®åŒ–ç®¡ç†**ï¼šçµæ´»çš„é…ç½®ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰å¤„ç†ç­–ç•¥
- **è´¨é‡æŠ¥å‘Š**ï¼šè¯¦ç»†çš„æ•°æ®è´¨é‡åˆ†æå’Œå¤„ç†å‰åå¯¹æ¯”

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
æ•°æ®å¤„ç†Agent
â”œâ”€â”€ å‰ç«¯ç•Œé¢ (Streamlit)
â”‚   â”œâ”€â”€ æ•°æ®ä¸Šä¼ ä¸é¢„è§ˆ
â”‚   â”œâ”€â”€ é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ å¤„ç†ç»“æœå±•ç¤º
â”‚   â””â”€â”€ è´¨é‡æŠ¥å‘Šå¯è§†åŒ–
â”œâ”€â”€ åç«¯API (FastAPI)
â”‚   â”œâ”€â”€ æ•°æ®å¤„ç†æ¥å£
â”‚   â”œâ”€â”€ çŠ¶æ€æŸ¥è¯¢æ¥å£
â”‚   â”œâ”€â”€ é…ç½®éªŒè¯æ¥å£
â”‚   â””â”€â”€ æ•°æ®å¯¼å‡ºæ¥å£
â””â”€â”€ å¤„ç†å¼•æ“ (MACore)
    â”œâ”€â”€ æ•°æ®éªŒè¯èŠ‚ç‚¹
    â”œâ”€â”€ è¡¨ç»“æ„æ ‡å‡†åŒ–èŠ‚ç‚¹
    â”œâ”€â”€ ç¼ºå¤±å€¼å¤„ç†èŠ‚ç‚¹
    â”œâ”€â”€ æ™ºèƒ½è„±æ•AgentèŠ‚ç‚¹
    â”œâ”€â”€ ç‰¹å¾æå–èŠ‚ç‚¹
    â””â”€â”€ è´¨é‡æŠ¥å‘ŠèŠ‚ç‚¹
```

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®æ ‡å‡†åŒ–
- âœ… åˆ—åæ ¼å¼ç»Ÿä¸€ (snake_case/camelCase/PascalCase)
- âœ… æ•°æ®ç±»å‹è‡ªåŠ¨æ£€æµ‹å’Œè½¬æ¢
- âœ… é‡å¤åˆ—å’Œç©ºåˆ—è‡ªåŠ¨æ¸…ç†
- âœ… è‡ªå®šä¹‰ç±»å‹æ˜ å°„è§„åˆ™

### 2. ç¼ºå¤±å€¼å¤„ç†
- âœ… å¤šç§å¡«å……ç­–ç•¥ (å‡å€¼/ä¸­ä½æ•°/ä¼—æ•°/å‰å‘å¡«å……/åå‘å¡«å……)
- âœ… æŒ‰åˆ—è‡ªå®šä¹‰å¤„ç†ç­–ç•¥
- âœ… ç¼ºå¤±ç‡é˜ˆå€¼æ§åˆ¶
- âœ… è‡ªå®šä¹‰å¡«å……å€¼è®¾ç½®

### 3. æ™ºèƒ½æ•°æ®è„±æ•
- ğŸ¤– **AIè¯†åˆ«æ•æ„Ÿå­—æ®µ**ï¼šæ‰‹æœºå·ã€èº«ä»½è¯ã€é‚®ç®±ã€å§“åã€åœ°å€
- ğŸ”’ **å¤šç§è„±æ•ç­–ç•¥**ï¼šéƒ¨åˆ†è„±æ•ã€å“ˆå¸Œè„±æ•ã€éšæœºè„±æ•ã€åˆ é™¤è„±æ•
- âš™ï¸ **é…ç½®åŒ–è§„åˆ™**ï¼šæ”¯æŒè‡ªå®šä¹‰è„±æ•è§„åˆ™å’Œç­–ç•¥
- ğŸ‘ï¸ **è„±æ•é¢„è§ˆ**ï¼šå¤„ç†å‰åæ•°æ®å¯¹æ¯”å±•ç¤º

### 4. æ•°æ®è´¨é‡åˆ†æ
- ğŸ“Š **è´¨é‡æŒ‡æ ‡è®¡ç®—**ï¼šå®Œæ•´æ€§ã€ä¸€è‡´æ€§ã€æ•´ä½“è´¨é‡å¾—åˆ†
- ğŸ“ˆ **è´¨é‡æ”¹å–„è·Ÿè¸ª**ï¼šå¤„ç†å‰åè´¨é‡å¯¹æ¯”
- ğŸ“ **è¯¦ç»†æŠ¥å‘Šç”Ÿæˆ**ï¼šæ–‡æœ¬å’Œå›¾è¡¨å½¢å¼çš„è´¨é‡æŠ¥å‘Š
- ğŸ” **å¼‚å¸¸æ•°æ®è¯†åˆ«**ï¼šè‡ªåŠ¨æ ‡è®°æ½œåœ¨é—®é¢˜

### 5. ç‰¹å¾æå–ï¼ˆå¯é€‰ï¼‰
- ğŸ”¢ **æ•°å€¼ç‰¹å¾**ï¼šç»Ÿè®¡ç‰¹å¾ã€ç©ºå€¼æ ‡è®°ã€ç»å¯¹å€¼ç­‰
- ğŸ“ **æ–‡æœ¬ç‰¹å¾**ï¼šé•¿åº¦ã€è¯æ•°ã€ç©ºå€¼æ ‡è®°ç­‰
- ğŸ“… **æ—¶é—´ç‰¹å¾**ï¼šå¹´ã€æœˆã€æ˜ŸæœŸç­‰æ—¶é—´ç»´åº¦

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **æ¡†æ¶**ï¼šMACore (å·¥ä½œæµç¼–æ’) + FastAPI (APIæœåŠ¡)
- **æ•°æ®å¤„ç†**ï¼šPandas + NumPy
- **é…ç½®ç®¡ç†**ï¼šPydantic + PyYAML
- **AIé›†æˆ**ï¼šOpenAI API (æ•æ„Ÿå­—æ®µè¯†åˆ«)

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**ï¼šStreamlit
- **å¯è§†åŒ–**ï¼šPlotly
- **æ•°æ®å±•ç¤º**ï¼šPandas DataFrameç»„ä»¶

### æ”¯æŒæ ¼å¼
- **è¾“å…¥**ï¼šCSVã€Excel (.xlsx/.xls)ã€JSON
- **è¾“å‡º**ï¼šCSVã€Excelã€JSON

## ğŸ“¦ å®‰è£…å’Œéƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- pip åŒ…ç®¡ç†å™¨

### å¿«é€Ÿå¯åŠ¨

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <project-url>
cd bpapp_004_dataprocessing
```

2. **åˆ›å»ºå¹¶æ¿€æ´»Pythonè™šæ‹Ÿç¯å¢ƒ**
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

4. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp env.template .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ å¿…è¦çš„APIå¯†é’¥ï¼ˆå¦‚OPENAI_API_KEYç­‰ï¼‰
```

5. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
python run_backend.py
# åç«¯æœåŠ¡å°†åœ¨ http://localhost:8000 å¯åŠ¨
```

6. **å¯åŠ¨å‰ç«¯ç•Œé¢**ï¼ˆæ–°å¼€ç»ˆç«¯çª—å£ï¼‰
```bash
# ç¡®ä¿æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows: venv\Scripts\activate
# macOS/Linux: source venv/bin/activate

python run_frontend.py
# å‰ç«¯ç•Œé¢å°†åœ¨ http://localhost:8501 å¯åŠ¨
```

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åŸºç¡€ä½¿ç”¨æµç¨‹

1. **è®¿é—®å‰ç«¯ç•Œé¢**ï¼šæ‰“å¼€ http://localhost:8501
2. **ä¸Šä¼ æ•°æ®æ–‡ä»¶**ï¼šæ”¯æŒæ‹–æ‹½ä¸Šä¼ CSV/Excel/JSONæ–‡ä»¶
3. **æ•°æ®è´¨é‡æ£€æŸ¥**ï¼šå¿«é€Ÿæ£€æŸ¥æ•°æ®åŸºæœ¬è´¨é‡
4. **é…ç½®å¤„ç†å‚æ•°**ï¼šé€‰æ‹©é»˜è®¤é…ç½®æˆ–è‡ªå®šä¹‰é…ç½®
5. **æ‰§è¡Œæ•°æ®å¤„ç†**ï¼šä¸€é”®å¯åŠ¨æ•°æ®å¤„ç†æµç¨‹
6. **æŸ¥çœ‹å¤„ç†ç»“æœ**ï¼šå¤šç»´åº¦å±•ç¤ºå¤„ç†ç»“æœå’Œè´¨é‡æŠ¥å‘Š
7. **å¯¼å‡ºå¤„ç†æ•°æ®**ï¼šä¸‹è½½å¤„ç†åçš„æ¸…æ´æ•°æ®

### APIä½¿ç”¨ç¤ºä¾‹

```python
import requests
import base64

# 1. ä¸Šä¼ æ–‡ä»¶è¿›è¡Œå¤„ç†
with open('data.csv', 'rb') as f:
    file_content = base64.b64encode(f.read()).decode()

response = requests.post('http://localhost:8000/api/v1/process-data', 
    json={
        'file_data': file_content,
        'filename': 'data.csv',
        'config': None  # ä½¿ç”¨é»˜è®¤é…ç½®
    }
)

job_id = response.json()['job_id']

# 2. æŸ¥è¯¢å¤„ç†çŠ¶æ€
status_response = requests.get(f'http://localhost:8000/api/v1/processing-status/{job_id}')
result = status_response.json()

# 3. å¯¼å‡ºå¤„ç†åæ•°æ®
if result['status'] == 'completed':
    export_response = requests.post(f'http://localhost:8000/api/v1/export-data/{job_id}?format=csv')
    with open('processed_data.csv', 'wb') as f:
        f.write(export_response.content)
```

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

```yaml
# config/custom_config.yaml
standardization:
  enable_column_rename: true
  naming_convention: "snake_case"
  auto_detect_types: true

missing_handling:
  default_strategy: "mean"
  missing_threshold: 0.8
  column_strategies:
    age: "median"
    name: "mode"

masking_rules:
  enable_auto_detection: true
  sensitivity_threshold: 0.7
  column_rules:
    phone:
      type: "phone"
      strategy: "partial"
    email:
      type: "email"
      strategy: "hash"
```

## ğŸ“Š å¤„ç†ç¤ºä¾‹

### è¾“å…¥æ•°æ®
```csv
user_id,User Name,Age,Phone,Email,Salary
1,å¼ ä¸‰,25,13812345678,zhangsan@example.com,5000.5
2,æå››,,15987654321,lisi@test.com,6000.0
3,ç‹äº”,35,,wangwu@demo.org,
4,èµµå…­,40,18611112222,,8000.0
```

### å¤„ç†åæ•°æ®
```csv
user_id,user_name,age,phone,email,salary
1,å¼ *,25,138****5678,zha****@example.com,5000.5
2,æ*,32.5,159****4321,lis****@test.com,6000.0
3,ç‹*,35,139****0000,wan****@demo.org,6500.0
4,èµµ*,40,186****2222,[å·²è„±æ•],8000.0
```

### å¤„ç†æ‘˜è¦
- âœ… åˆ—åæ ‡å‡†åŒ–ï¼šUser Name â†’ user_name
- âœ… ç¼ºå¤±å€¼å¡«å……ï¼šAgeåˆ—ä½¿ç”¨å‡å€¼å¡«å……ï¼ŒSalaryåˆ—ä½¿ç”¨å‡å€¼å¡«å……
- ğŸ”’ æ•æ„Ÿå­—æ®µè„±æ•ï¼šå§“åã€æ‰‹æœºå·ã€é‚®ç®±è‡ªåŠ¨è„±æ•
- ğŸ“Š è´¨é‡å¾—åˆ†æå‡ï¼š76% â†’ 95%

## ğŸ§ª æµ‹è¯•å’Œå¼€å‘

### è¿è¡Œç¤ºä¾‹
```bash
# ç¡®ä¿å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python main.py  # è¿è¡Œç¤ºä¾‹æ•°æ®å¤„ç†
```

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ– venv\Scripts\activate  # Windows

# 2. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt

# 3. è®¾ç½®ç¯å¢ƒå˜é‡
cp env.template .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIå¯†é’¥

# 4. éªŒè¯å®‰è£…
python -c "import streamlit, fastapi, pandas; print('å®‰è£…æˆåŠŸï¼')"
```

### è™šæ‹Ÿç¯å¢ƒç®¡ç†
```bash
# åœç”¨è™šæ‹Ÿç¯å¢ƒ
deactivate

# é‡æ–°æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate  # Linux/macOS
# æˆ– venv\Scripts\activate  # Windows

# åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚éœ€é‡æ–°åˆ›å»ºï¼‰
rm -rf venv  # Linux/macOS
# æˆ–æ‰‹åŠ¨åˆ é™¤ venv æ–‡ä»¶å¤¹  # Windows
```

## ğŸ“š å¼€å‘æ–‡æ¡£

è¯¦ç»†çš„å¼€å‘æ–‡æ¡£è¯·å‚è€ƒï¼š
- [è®¾è®¡æ–‡æ¡£](docs/design.md) - ç³»ç»Ÿæ¶æ„å’ŒæŠ€æœ¯è®¾è®¡
- [å¼€å‘è®°å½•](docs/detail_note.md) - è¯¦ç»†çš„å¼€å‘è¿‡ç¨‹è®°å½•
- [APIæ–‡æ¡£](http://localhost:8000/docs) - åç«¯APIæ¥å£æ–‡æ¡£

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°çš„è„±æ•ç­–ç•¥ï¼Ÿ
A: åœ¨ `utils/data_masking.py` ä¸­æ·»åŠ æ–°çš„è„±æ•å‡½æ•°ï¼Œå¹¶åœ¨é…ç½®éªŒè¯å™¨ä¸­æ›´æ–°ç­–ç•¥æšä¸¾ã€‚

### Q: å¦‚ä½•é›†æˆæ–°çš„æ•°æ®æºï¼Ÿ
A: åœ¨ `main.py` ä¸­æ·»åŠ æ–°çš„æ•°æ®è¯»å–å‡½æ•°ï¼Œæ”¯æŒæ–°çš„æ–‡ä»¶æ ¼å¼æˆ–æ•°æ®åº“è¿æ¥ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰è´¨é‡æŒ‡æ ‡ï¼Ÿ
A: åœ¨ `utils/quality_metrics.py` ä¸­æ·»åŠ æ–°çš„è´¨é‡è®¡ç®—å‡½æ•°ï¼Œå¹¶æ›´æ–°æŠ¥å‘Šç”Ÿæˆé€»è¾‘ã€‚

---

**è®©æ•°æ®å¤„ç†å˜å¾—ç®€å•ã€å®‰å…¨ã€æ™ºèƒ½ï¼** ğŸš€